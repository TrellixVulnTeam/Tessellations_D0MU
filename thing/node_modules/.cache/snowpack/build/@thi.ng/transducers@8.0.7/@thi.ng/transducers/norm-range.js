import { map } from './map.js';
import '@thi.ng/checks/is-iterable';
import '../../common/compr-047fbcec.js';
import './iterator.js';
import '@thi.ng/api/api';
import '../../common/ensure-ec27f47c.js';
import '@thi.ng/checks/implements-function';
import './push.js';
import './reduce.js';
import '@thi.ng/checks/is-arraylike';
import '@thi.ng/errors/illegal-arity';
import '../../common/reduced-6f291092.js';

/**
 * Yields sequence of `n+1` monotonically increasing numbers in the
 * closed interval (0.0 .. 1.0). If `n <= 0`, yields nothing.
 *
 * @example
 * ```ts
 * [...normRange(4)]
 * // [0, 0.25, 0.5, 0.75, 1.0]
 * ```
 *
 * @param n - number of steps
 * @param includeLast - include last value (i.e. `1.0`)
 */
function* normRange(n, includeLast = true) {
    if (n > 0) {
        for (let i = 0, m = includeLast ? n + 1 : n; i < m; i++) {
            yield i / n;
        }
    }
}
/**
 * 2D version of {@link normRange} in Y-major order (i.e. X is inner loop).
 *
 * @param nx
 * @param ny
 * @param includeLastX
 * @param includeLastY
 */
function* normRange2d(nx, ny, includeLastX = true, includeLastY = true) {
    const rx = [...normRange(nx, includeLastX)];
    for (let y of normRange(ny, includeLastY)) {
        yield* map((x) => [x, y], rx);
    }
}
/**
 * 3D version of {@link normRange} in Z-major order (i.e. X being innermost
 * loop).
 *
 * @param nx
 * @param ny
 * @param includeLastX
 * @param includeLastY
 */
function* normRange3d(nx, ny, nz, includeLastX = true, includeLastY = true, includeLastZ = true) {
    const sliceXY = [...normRange2d(nx, ny, includeLastX, includeLastY)];
    for (let z of normRange(nz, includeLastZ)) {
        yield* map((xy) => [...xy, z], sliceXY);
    }
}

export { normRange, normRange2d, normRange3d };
